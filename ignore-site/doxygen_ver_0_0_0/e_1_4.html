<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>april: Example 4 - IDs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">april
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">...</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('e_1_4.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Example 4 - IDs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>While some of the components of a world may be created by hand, the focus is on being able to create and recreate components. To be able to do so we use a centralised system of IDs and a set of factories described below.</p>
<p>The management of the IDs is govern by the <a class="el" href="classapril_1_1UniqueId.html" title="Provides support for unique identificators.">UniqueId</a> class. However, since an instance is embedded in the <a class="el" href="classapril_1_1World.html" title="A world hosts agents, events, environment.">World</a>, we will discuss it in this context.</p>
<p>We are basically storing a list of 64-bit numbers associated or not with a describing string. Setting the value for an ID (that is created if it does not exist) is done as follows: </p>
<div class="fragment"><div class="line">    w-&gt;insertId( 1, <span class="stringliteral">&quot;some-text&quot;</span> );</div>
</div><!-- fragment --><p>In this case the ID 1 is created if it does not exists and the label <b>"some-text"</b> is associated with it.</p>
<p>Somehow similar is: </p>
<div class="fragment"><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;&#39;some-text&#39; at ID: &quot;</span> </div>
<div class="line">         &lt;&lt;  w-&gt;checkAddId( <span class="stringliteral">&quot;some-text&quot;</span> )</div>
<div class="line">          &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;&#39;different-text&#39; at ID: &quot;</span> </div>
<div class="line">         &lt;&lt;  w-&gt;checkAddId( <span class="stringliteral">&quot;different-text&quot;</span> )</div>
<div class="line">          &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
</div><!-- fragment --><p>This attempts to locate the string just like <a class="el" href="classapril_1_1World.html#a36b109bba73563278e7519f37ddcfd88" title="get the string associated with an identifier">World::nameForId()</a> does but, if it not found, next free ID is allocated and the string is associated with it.</p>
<p>Blindly adding an ID with or without an associated string uses an internaly cached counter so that the search for a free ID is fast. This also means that the values may have gaps, with some low order IDs not used. </p>
<div class="fragment"><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;ID autogenerated and no associated string: &quot;</span> </div>
<div class="line">         &lt;&lt;  w-&gt;addNewId()</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;ID autogenerated and associated string: &quot;</span> </div>
<div class="line">         &lt;&lt;  w-&gt;addNewId( <span class="stringliteral">&quot;associated string&quot;</span> )</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
</div><!-- fragment --><p> Retrieving the text associated with a particular ID done as so: </p>
<div class="fragment"><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Text associated with ID 1: &quot;</span></div>
<div class="line">         &lt;&lt; w-&gt;nameForId( 1 ).toLatin1().constBegin()</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>; <span class="comment">// &quot;some-text&quot;</span></div>
</div><!-- fragment --><p>will return an empty string if the ID has not been defined, yet.</p>
<p>Following method only sets the text if the id is not defined. In our case, because 1 was already present the text is not modified. ID 2, however, does not exists, yet, so the text associated with ID 2 is <b>"default-text"</b> </p>
<div class="fragment"><div class="line">    w-&gt;checkAddId( 1, <span class="stringliteral">&quot;default-text&quot;</span> );</div>
<div class="line">    w-&gt;checkAddId( 2, <span class="stringliteral">&quot;default-text&quot;</span> );</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Text associated with ID 1: &quot;</span> </div>
<div class="line">         &lt;&lt; w-&gt;nameForId( 1 ).toLatin1().constBegin()</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>; <span class="comment">// &quot;some-text&quot;</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Text associated with ID 2: &quot;</span> </div>
<div class="line">         &lt;&lt; w-&gt;nameForId( 2 ).toLatin1().constBegin()</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>; <span class="comment">// &quot;default-text&quot;</span></div>
</div><!-- fragment --><p> Finding an ID based on the string is also possible. First ID that matches the search is returned or InvalidId if none is found. Note that the search is case sensitive and there is no pattern support. </p>
<div class="fragment"><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Searching &#39;&#39; (empty string) returns: &quot;</span> </div>
<div class="line">         &lt;&lt; w-&gt;idValue( <span class="stringliteral">&quot;&quot;</span> )</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>; <span class="comment">// 0 = InvalidId</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Searching &#39;text&#39; returns: &quot;</span></div>
<div class="line">         &lt;&lt; w-&gt;idValue( <span class="stringliteral">&quot;text&quot;</span> ) </div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>; <span class="comment">// 0 = InvalidId</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Searching &#39;some-text&#39; returns: &quot;</span> </div>
<div class="line">         &lt;&lt; w-&gt;idValue( <span class="stringliteral">&quot;some-text&quot;</span> ) </div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>; <span class="comment">// 1</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Searching &#39;default-text&#39; returns: &quot;</span></div>
<div class="line">         &lt;&lt; w-&gt;idValue( <span class="stringliteral">&quot;default-text&quot;</span> )</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>; <span class="comment">// 2</span></div>
</div><!-- fragment --><p> It should also be noted that <a class="el" href="classapril_1_1UniqueId.html" title="Provides support for unique identificators.">UniqueId</a> is capable of storing and loading the list of values and associated strings, capability that is used in saving/restoring a a world.</p>
<p><br/>
<br/>
<hr/>
 <table  width="100%">
<tr>
<td><a class="el" href="e_1_3.html">Example 3 - Running a world</a> </td><td align="right"><a class="el" href="e_1_5.html">Example 5 - DNA</a>  </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Apr 7 2013 20:45:22 for april by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
